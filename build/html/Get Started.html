
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Get Started &#8212; KVCE2 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Documentation" href="Documentation.html" />
    <link rel="prev" title="Installation" href="Installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="get-started">
<h1>Get Started<a class="headerlink" href="#get-started" title="Permalink to this heading">¶</a></h1>
<p>In this section, we will introduce the main the features of this project step by step.</p>
<p>we arrange this section by functions. That is, in each part of this section, we finish a task concerning with the configuration of the linux.</p>
<section id="import">
<h2>import<a class="headerlink" href="#import" title="Permalink to this heading">¶</a></h2>
<p>before everything begins, import the package.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kvce</span>
</pre></div>
</div>
<p>please make sure you can import the lib successfully.</p>
</section>
<section id="linux-kernel-configuration-variable">
<h2>linux kernel configuration variable<a class="headerlink" href="#linux-kernel-configuration-variable" title="Permalink to this heading">¶</a></h2>
<p>The Linux kernel configuration is usually found in the kernel source in the file: /usr/src/linux/.config . It is not recommended to edit this file directly but to use one of these configuration options:</p>
<ul class="simple">
<li><p>make config - starts a character based questions and answer session</p></li>
<li><p>make menuconfig - starts a terminal-oriented configuration tool (using ncurses)</p></li>
<li><p>make xconfig - starts a X based configuration tool</p></li>
</ul>
<p>After you run the commands above, you will get .config file which contains a set of configuration varibles set. In other words, the configuration variables are just like “switches” which control what will be compiled into the linux kernel or kernel module.</p>
<p>For more information about the linux configuration variable. See <a class="reference external" href="https://tldp.org/HOWTO/SCSI-2.4-HOWTO/kconfig.html">here</a></p>
</section>
<section id="export-the-linux-kernel-configuration-items">
<h2>export the linux kernel configuration items<a class="headerlink" href="#export-the-linux-kernel-configuration-items" title="Permalink to this heading">¶</a></h2>
<p>One of the most basic functions provided by KVCE is to export all configuration items of a certain kernel version which is required by many downstream tasks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to know where to download the source code of the Linux kernel, you can refer to this <a class="reference external" href="https://mirrors.edge.kernel.org/pub/linux/kernel/">website</a></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kvce</span>
<span class="n">config_list</span> <span class="o">=</span> <span class="n">kvce</span><span class="o">.</span><span class="n">export_config_list</span><span class="p">(</span><span class="s1">&#39;./linux-5.10.22&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>the <cite>export_config_list</cite> function return a list of string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># the code above is omitted</span>
<span class="n">config_list</span> <span class="o">=</span> <span class="n">kvce</span><span class="o">.</span><span class="n">export_config_list</span><span class="p">(</span><span class="s1">&#39;./linux-5.10.22&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config_list</span><span class="p">)</span>
<span class="sd">&#39;&#39;&#39;output:</span>
<span class="sd">[&#39;CONFIG_GCC&#39;,&#39;CONFIG_IS_GCC&#39;,&#39;CONFIG_STACKINIT&#39;...]</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p><cite>export_config_list</cite> function also provides some useful optional arguments. For example, you can use the <cite>write_file</cite> argument to store the result to a file.</p>
<p>next time, you can load the file directly from the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kvce</span>
<span class="n">config_list</span> <span class="o">=</span> <span class="n">kvce</span><span class="o">.</span><span class="n">export_config_list</span><span class="p">(</span><span class="s1">&#39;./linux-5.10.22&#39;</span><span class="p">,</span> <span class="n">write_file</span><span class="o">=</span><span class="s1">&#39;./config_list&#39;</span><span class="p">)</span>

<span class="c1"># here the config_list_from_file is the same as config_list</span>
<span class="n">config_list_from_file</span> <span class="o">=</span> <span class="n">kvce</span><span class="o">.</span><span class="n">load_config_file</span><span class="p">(</span><span class="s1">&#39;./config_list&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For the detailed usage about this function, see the documentation part.(TODO:ADD REFERENCE)</p>
</section>
<section id="find-the-lines-that-are-affected-by-configuration-variables">
<h2>Find the LINES that are affected by configuration variables<a class="headerlink" href="#find-the-lines-that-are-affected-by-configuration-variables" title="Permalink to this heading">¶</a></h2>
<p>This part focuses how these CONFIG_XXX configuration variables affect the process of kernel process?</p>
<p>Generally these configuration variables affect the kernel in two ways:</p>
<ul class="simple">
<li><p>it affect the C files preprocess:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef CONFIG_FOO</span>
<span class="c1">//some statements here</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<ul class="simple">
<li><p>it decides what files will be passed to compiler:</p></li>
</ul>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="c">#drivers/isdn/i4l/Makefile</span>
<span class="c"># Makefile for the kernel ISDN subsystem and device drivers.</span>
<span class="c"># Each configuration option enables a list of files.</span>
<span class="nv">obj-$(CONFIG_ISDN_I4L)</span>         <span class="o">+=</span> isdn.o
<span class="nv">obj-$(CONFIG_ISDN_PPP_BSDCOMP)</span> <span class="o">+=</span> isdn_bsdcomp.o
</pre></div>
</div>
<p>In this part, we focuses the first case. The API is simple, we will put the emphasis on the explanation on the result of it.</p>
<p>To get lines affected by specific configuration list variable, just call the <cite>analysis_lines</cite> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kvce</span>
<span class="n">config_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CONFIG_CC_VERSION_TEXT&#39;</span><span class="p">,</span> <span class="s1">&#39;CONFIG_CC_IS_GCC&#39;</span><span class="p">,</span> <span class="s1">&#39;CONFIG_CC_IS_CLANG&#39;</span><span class="p">]</span>
<span class="n">kvce</span><span class="o">.</span><span class="n">analysis_lines</span><span class="p">(</span><span class="s1">&#39;./linux-5.18.10&#39;</span><span class="p">,</span> <span class="n">config_list</span><span class="p">)</span>
</pre></div>
</div>
<p>You will get the result file like the structure as above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">  1  [</span>
<span class="sd">  2   {</span>
<span class="sd">  3     &quot;config_name&quot;: &quot;CONFIG_CFG80211_CERTIFICATION_ONUS&quot;,</span>
<span class="sd">  4     &quot;search_res&quot;: [</span>
<span class="sd">  5     ¦ {</span>
<span class="sd">  6     ¦   &quot;path&quot;: &quot;./linux-5.18.10/drivers/net/wireless/ath/dfs_pattern_detector.c&quot;,</span>
<span class="sd">  7     ¦   &quot;extend&quot;: &quot;source&quot;,</span>
<span class="sd">  8     ¦   &quot;hits&quot;: [</span>
<span class="sd">  9     ¦   ¦ {</span>
<span class="sd"> 10     ¦   ¦   &quot;line_no&quot;: 359,</span>
<span class="sd"> 11     ¦   ¦   &quot;content&quot;: &quot;\tif (!IS_ENABLED(CONFIG_CFG80211_CERTIFICATION_ONUS))&quot;</span>
<span class="sd"> 12     ¦   ¦ }</span>
<span class="sd"> 13     ¦   ],</span>
<span class="sd"> 14     ¦   &quot;report&quot;: null</span>
<span class="sd"> 15     ¦ },</span>
<span class="sd"> 16     ¦ {</span>
<span class="sd"> 17     ¦   &quot;path&quot;: &quot;./linux-5.18.10/drivers/net/wireless/ti/wl18xx/debugfs.c&quot;,</span>
<span class="sd"> 18     ¦   &quot;extend&quot;: &quot;source&quot;,</span>
<span class="sd"> 19     ¦   &quot;hits&quot;: [</span>
<span class="sd"> 20     ¦   ¦ {</span>
<span class="sd"> 21     ¦   ¦   &quot;line_no&quot;: 342,</span>
<span class="sd"> 22     ¦   ¦   &quot;content&quot;: &quot;#ifdef CONFIG_CFG80211_CERTIFICATION_ONUS&quot;</span>
<span class="sd"> 23     ¦   ¦ },</span>
<span class="sd"> 24     ¦   ¦ {</span>
<span class="sd"> 25     ¦   ¦   &quot;line_no&quot;: 563,</span>
<span class="sd"> 26     ¦   ¦   &quot;content&quot;: &quot;#ifdef CONFIG_CFG80211_CERTIFICATION_ONUS&quot;</span>
<span class="sd"> 27     ¦   ¦ }</span>
<span class="sd"> 28     ¦   ],</span>
<span class="sd"> 29     ¦   &quot;report&quot;: [</span>
<span class="sd"> 30     ¦   ¦ [</span>
<span class="sd"> 31     ¦   ¦   [</span>
<span class="sd"> 32     ¦   ¦   ¦ 343,</span>
<span class="sd"> 33     ¦   ¦   ¦ 405</span>
<span class="sd"> 34     ¦   ¦   ],</span>
<span class="sd"> 35     ¦   ¦   true,</span>
<span class="sd"> 36     ¦   ¦   &quot;+&quot;</span>
<span class="sd"> 37     ¦   ¦ ],</span>
<span class="sd"> 38     ¦   ¦ [</span>
<span class="sd"> 39     ¦   ¦   [</span>
<span class="sd"> 40     ¦   ¦   ¦ 564,</span>
<span class="sd"> 41     ¦   ¦   ¦ 564</span>
<span class="sd"> 42     ¦   ¦   ],</span>
<span class="sd"> 43     ¦   ¦   true,</span>
<span class="sd"> 44     ¦   ¦   &quot;+&quot;</span>
<span class="sd"> 45     ¦   ¦ ]</span>
<span class="sd"> 46     ¦   ]</span>
<span class="sd"> 47     ¦ }</span>
<span class="sd"> 48     ]</span>
<span class="sd"> 49   },...</span>
<span class="sd">   ]</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">KVCE2</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#import">import</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux-kernel-configuration-variable">linux kernel configuration variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="#export-the-linux-kernel-configuration-items">export the linux kernel configuration items</a></li>
<li class="toctree-l2"><a class="reference internal" href="#find-the-lines-that-are-affected-by-configuration-variables">Find the LINES that are affected by configuration variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html">Documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="Documentation.html" title="next chapter">Documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, march1917.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/Get Started.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>